language: c
os:
  - linux
# disable osx for the moment
#  - osx

sudo: required

addons:
  apt:
    packages:
      # this are to be able to execute a VM downloaded from the internet during build
      - lib32asound2
      - lib32z1
      - lib32ncurses5
      - lib32bz2-1.0
      - gvfs-daemons:i386
      # this are requirements for building the vm
      - cmake
      - zip
      - bash-completion
      - git
      - xz-utils
      - debhelper
      - devscripts
      - libc6-dev:i386
      - libasound2:i386
      - libasound2-dev:i386
      - libssl-dev:i386
      - libssl0.9.8:i386
      - libfreetype6-dev:i386
      - libx11-dev:i386
      - libsm-dev:i386
      - libice-dev:i386
      - libgl1-mesa-glx:i386
      - libgl1-mesa-dev:i386
      - libxext-dev:i386
      - libglapi-mesa:i386
      - build-essential
      - gcc-multilib
      - g++

script: 
  - scripts/build.sh
  - scripts/test.sh
  - scripts/debian.sh

matrix:
# Ignore failures with OSX as the build forces to be build for OSX 10.6 and
# the header files are not installed and we can't install them on OSX. This
# could be easily fixed with a different CMakeLists.txt
#  allow_failures:
#    - os: osx


env:
  global:
  - secure: "LS+0CRCUrPTUmd6SDJ72//e6j6xlRbcsSwIzmdiB3skxmu0uRqqpMjMB3OAEUgSJCdeES4xijixaXFyWe9belE3W6rYEOSNpMaL5g8FywnpxMQNZgE44bdJB3D2UBDHZkgoU2c8TGfN09z6tWxWr/dILSuXHsuRnl2BqX/PTb0SIcSmcy/ExWmEtCl9FuATlujvpC4LMlf0TKA0ps6Z9q9OndC7kavsFI+OG+6qGXsz3VrBpe2fJ8OQ0SNJw/oaYO4ryC805dNP72sy99QvfozSOtWLkeQ6P/JurZv6XcYygi4A80MVZeCq6oNNsaSLNzuo61eijPu/MrhbWU5JGZFbX6JTpMSYofWKUaf87AkMmYtB+ni6XfWePvQjjd7T3qXdC7PHM92uaoiQgGYh6SQvvBR8vy5shvIhVAiwgW2TVoqH2R9YQx0Z1vFFzOzYBaULuJWO9lJbxeC8dF+eKUerrj5AEXfGEJJPcQxiboY2ne9Atv8aaya8U73AEXmWVkVYOCCrELI0BEiE2jdgupSvo0Vuyma6dLX4KiDsNR8t3pOKN/u49UrCpBK3AhNIyct4S+xdNGfLH3APQaba9N83Wg4P3kgpe/IeyA1GZFTKVdrAB2d2+JjYVu7UEkAqE/ltJP7MWoUiL56OBQ43KKh0Wo0Dnqd4a5m8N2n+2Ft8="
  - secure: "a5mFdC4CW7AvEQ8lK3kDRIxwP9aZlduY128ceMg1DH0pumTxdUq5t35bKixfSWWUlcXQlcaAg5L7fi9vehIqBTVjrNktzjvvpSgv+3jKxvQUbKT6502GKYwZaagEPIBykYVGOHehl6I+k6IxHEd4tE/1OtXjD8pJc5CPE2pmFqJtQryB6kGx9L2gjmv4A7ncO1Xsn2E54mmcU2PVKaIyU+uXRfyoBdNYrycYsHBuk4XDuGFQELMBSA5jJ1T1sABqNEh89y01uPadTLunesKfqgS4zS+jrIhBMejOKW0avO/ot4QiQEVg2jp+17o6qfmGdaQj8tD2zjkgsW5WTClpmYeeGgkfKYyOjvSW2ElcigkccsLDnSs6kNjRc1qoCNO4f8Ojlvl2M2qo0pZLt1S5ttgH6v6KHXDPfNTKNQGrELx9GD5mWQLT3zx4odCwG1onvCzKh6aDR4n3jNUIeJUEnMuITCZ4GlAS+lANe6dIQ4Avoc8HbmpAL5Bdzi6XexRpuWmyQT94dzQxZW3lGosPvUSGsJFroOSzyJ8iF1T/W8KuCQlE8YNkSn6E9jJKbq1pji2vCB+EegdJXM0I+ToEyE2Pvg4XUt5Fujg0ikYPfy86DBZtQ9PIB+vcdTuZxmnxMOoKi8sfy9j8W6KSvtoI7t8U2NQQvr9lTAt+vqJK08g="
